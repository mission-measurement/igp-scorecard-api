FROM node:latest

ARG NODE_ENV
ARG DB_SERVER
ARG DB_USER
ARG DB_PASSWORD
ARG API_SECRET


RUN mkdir -p /usr/src/app

WORKDIR /usr/src/app

COPY . .

RUN npm install

EXPOSE 3000


ENV NODE_ENV=$NODE_ENV
ENV DB_SERVER=$DB_SERVER
ENV DB_USER=$DB_USER
ENV DB_PASSWORD=$DB_PASSWORD
ENV API_SECRET=$API_SECRET
ENV PORT=3000

CMD ["npm", "run", "start"]